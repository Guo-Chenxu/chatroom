**以下此次作业需要遵守的传输约定, 如果有没有涉及到的地方那大概率是后端还没有写到, 可以先按照自己思路写(不过建议先问一下后端, 也可能是忘记加上去了)**

本文档为[后端接口文档](./后端接口文档.md)部分细节的补充描述(如果两个文档不一样请看源代码或者直接询问后端)

1. 前端向后端传输数据均直接使用 Message 传输, 后端向前端传输数据则使用 Chat 包装一下. Chat 类中包含操作结果 flag 以及信息内容 message, 其中 message 可以为空, 比如某些修改或者删除操作时, 但 flag 一定会有, 根据 flag 判断该操作是否成功.
2. 所有返回的消息类型均与请求的类型相同
3. 所有具体的消息内容都放在 message 的 content 里面 ~~(虽然看上去很蠢, 但也而只能这么做)~~
4. 当用户登录和注册时, 前端发送的 message 的 content 是 user 的 json 字符串
5. 当用户请求未读消息时, 后端返回的 message 的 content 是 List<Message> 的 json 字符串
6. 当用户请求好友列表时, 后端返回的 message 的 content 是 List<User> 的 json 字符串
7. 当用户请求群聊列表时, 后端返回的 message 的 content 是 List<Group> 的 json 字符串
8. 当用户请求消息列表(聊天框内显示的消息)时候, 后端返回的 message 的 content 是 List<Message> 的 json 字符串
9. message 的 receiverName 是接收方姓名, 如果是群聊消息(即: isGroup=true), 则是群聊的名称(群聊名可以和用户名重复, 所以注意 isGroup 的值)
10. 一些情况下客户端发送的 message 内的 content 可以为空, 如用户添加好友时, 只需给定 senderName(请求方), receiverName(被请求方)以及 type(添加好友类型消息)即可, 其他如用户下线之类的请求也类似
11. 用户请求修改密码时, senderName 为用户名, content 为将要修改的密码
12. 用户申请添加好友时, 如果对方在线则返回一个 true, 否则返回 false
13. 同意添加好友, 返回内容无意义
14. 普通消息和群聊消息发送成功则不会返回值
15. 获取好友消息列表客户端发送的 senderName 和 receiverName 为双方名字
16. 获取群聊消息列表客户端发送的 receiverName 为群聊名
17. 添加/修改人脸, 客户端的 user 需要包含用户名和人脸信息
18. 删除人脸, 客户端的 content 为用户名即可
19. 建群, 客户端的 content 为 group, 其中要包含群名, 群主用户名和成员列表
20. 退群/加群, 客户端的 sender 为请求者用户名, receiver 为群名

2023-06-10 00:09:46 更新成功
